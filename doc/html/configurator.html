<!--
Copyright (C) 2005 The Regents of the University of California.
Produced at Lawrence Livermore National Laboratory (cf, DISCLAIMER).
Written by Morris Jette <jette1@llnl.gov> and Danny Auble <da@llnl.gov>
UCRL-WEB-217616.

This file is part of SLURM, a resource management program.
For details, see <http://www.llnl.gov/linux/slurm/>.

SLURM is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free
Software Foundation; either version 2 of the License, or (at your option)
any later version.

SLURM is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
details.

You should have received a copy of the GNU General Public License along
with SLURM; if not, write to the Free Software Foundation, Inc.,
59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.

$Id$
-->
<HTML>
<HEAD><TITLE>SLURM System Configuration Tool</TITLE>
<SCRIPT type="text/javascript">
<!--
function get_field(name,form)
{
  if (form.value)
     return name + "=" + form.value
  return "#" + name + "="
}

function get_field2(name,form)
{
  if (form.value)
     return name + "=" + form.value
  return ""
}


function get_radio_value(form)
{
  for (var i=0; i < form.length; i++)
  {
    if (form[i].checked)
    {
      return form[i].value
    }
  }
}

function displayfile()
{
  var printme = "# Slurm.conf file generated by configurator.html<br>" +
   "ControlMachine=" + document.config.control_machine.value + "<br>" +
   get_field("ControlAddr",document.config.control_addr) + "<br>" +
   get_field("BackupController",document.config.backup_controller) + "<br>" +
   get_field("BackupAddr",document.config.backup_addr) + "<br>" +
   "# <br>" +
   "SlurmUser=" + document.config.slurm_user.value + "<br>" +
   "SlurmctldPort=" + document.config.slurmctld_port.value + "<br>" +
   "SlurmdPort=" + document.config.slurmd_port.value + "<br>" +
   "AuthType=auth/" + get_radio_value(document.config.auth_type) + "<br>" +
   get_field("JobCredentialPrivateKey", document.config.private_key) + "<br>" +
   get_field("JobCredentialPublicCertificate", document.config.public_key) + "<br>" +
   "StateSaveLocation=" + document.config.state_save_location.value + "<br>" +
   "SlurmdSpoolDir=" + document.config.slurmd_spool_dir.value + "<br>" +
   "SwitchType=switch/" + get_radio_value(document.config.switch_type) + "<br>" +
   "MpiDefault=" + get_radio_value(document.config.mpi_default) + "<br>" +
   "SlurmctldPidFile=" + document.config.slurmctld_pid_file.value + "<br>" +
   "SlurmdPidFile=" + document.config.slurmd_pid_file.value + "<br>" +
   "ProctrackType=proctrack/" + get_radio_value(document.config.proctrack_type) + "<br>" +
   "#PluginDir= <br>" +
   "#CacheGroups= <br>" +
   "#FirstJobId= <br>" +
   "#ReturnToService= <br>" +
   "#MaxJobCount= <br>" +
   "#PropagateResourceLimits= <br>" +
   "#PropagateResourceLimitsExcept= <br>" +
   "#Prolog= <br>" +
   "#Epilog= <br>" +
   "#SrunProlog= <br>" +
   "#SrunEpilog= <br>" +
   "#TaskProlog= <br>" +
   "#TaskEpilog= <br>" +
   "#TaskPlugin= <br>" +
   "#TmpFs= <br>" +
   "# <br>" +
   "# TIMERS <br>" +
   "SlurmctldTimeout=" + document.config.slurmctld_timeout.value + "<br>" +
   "SlurmdTimeout=" + document.config.slurmd_timeout.value + "<br>" +
   "HeartbeatInterval=" + document.config.heartbeat_interval.value + "<br>" +
   "InactiveLimit=" + document.config.inactive_limit.value + "<br>" +
   "MinJobAge=" + document.config.min_job_age.value + "<br>" +
   "KillWait=" + document.config.kill_wait.value + "<br>" +
   "Waittime=" + document.config.wait_time.value + "<br>" +
   "# <br>" +
   "# SCHEDULING<br>" +
   "SchedulerType=sched/" + get_radio_value(document.config.sched_type) + "<br>" +
   get_field("SchedulerAuth",document.config.scheduler_auth) + "<br>" +
   get_field("SchedulerPort",document.config.scheduler_port) + "<br>" +
   "#SchedulerRootFilter= <br>" +
   "SelectType=select/" + get_radio_value(document.config.select_type) + "<br>" +
   "#FastSchedule= <br>" +
   "# <br>" +
   "# LOGGING <br>" +
   "SlurmctldDebug=" + document.config.slurmctld_debug.value + "<br>" +
   get_field("SlurmctldLogFile",document.config.slurmctld_logfile) + "<br>" +
   "SlurmdDebug=" + document.config.slurmd_debug.value + "<br>" +
   get_field("SlurmdLogFile",document.config.slurmd_logfile) + "<br>" +
   "JobCompType=jobcomp/" + get_radio_value(document.config.job_comp_type) + "<br>" +
   get_field("JobCompLoc",document.config.job_comp_loc) + "<br>" +
   "JobAcctType=jobacct/" + get_radio_value(document.config.job_acct_type) + "<br>" +
   get_field("JobAcctLoc",document.config.job_acct_loc) + "<br>" +
   "#JobAcctParameters= <br>"+
   "# <br>" +
   "# COMPUTE NODES <br>" +
   "NodeName=" + document.config.node_name.value +
   get_field2("NodeAddr",document.config.node_addr) +
   " Procs=" + document.config.procs.value +
   " State=UNKNOWN <br>" +
   "PartitionName=" + document.config.partition_name.value + 
   " Nodes=" + document.config.node_name.value + 
   " Default=YES"+
   " MaxTime=" + document.config.max_time.value +
   " State=UP"
    
    document.write(printme);
                       
}

-->
</SCRIPT>
</HEAD>
<BODY>
<FORM name=config>
<H1>SLURM Configration Tool</H1>
<P>This form can be used to create a SLURM configuration file with 
you controlling many of the important configuration parameters.
Some parameters will be set to default values, but you can
manually edit the resulting <I>slurm.conf</I> as desired
for greater flexibiilty. See <I>man slurm.conf</I> for more
details about the configuration parameters.

<P>After you have filled in the fields of interest, use the 
"Submit" button on the bottom of the page to build the <I>slurm.conf</I>
file. It will appear on your web browser. Save the file in text format 
as <I>slurm.conf</I> for use by SLURM.

<P>For more information about SLURM, see
<A HREF="http://www.llnl.gov/linux/slurm">http://www.llnl.gov/linux/slurm</A>
<P>
<A HREF="http://www.llnl.gov/disclaimer.html"><B>Privacy and legal notice</B></A>

<H2>Control Machines</H2>
Define the hostname of the computer on which the SLURM controller and
optional backup controller will execute. You can also specify addresses
of these computers if desired (defaults to their hostnames).
The IP addresses can be either numeric IP addresses or names.
Hostname values should should not be the fully qualified domain 
name (e.g. use <I>linux</I> rather than <I>linux.llnl.gov</I>).
<P>
<input type="text" name="control_machine" value="linux0"> <B>ControlMachine</B>:
Master Controller Hostname
<P>
<input type="text" name="control_addr"> <B>ControlAddr</B>: Master Controller 
Address (optional)
<P>
<input type="text" name="backup_controller"> <B>BackupController</B>: Backup 
Controller Hostname (optional)
<P>
<input type="text" name="backup_addr"> <B>BackupAddr</B>: Backup Controller 
Address (optional)
<P>

<H2>Compute Machines</H2>
Define the machines on which user applications can run.
You can also specify addresses of these computers if desired 
(defaults to their hostnames).
Only a few of the possible parameters associated with the nodes will 
be set by this tool, but many others are available. 
All of the nodes will be placed into a single partition (or queue) 
with global access. Many options are availble to group nodes into 
partitions with a wide variety of configuration parameters. 
Manually edit the <i>slurm.conf</i> produced to exercise these options.
Node names and addresses may be specified using a numeric range specification.

<P>
<input type="text" name="node_name" value="linux[1-32]"> <B>NodeName</B>:
Compute nodes
<P>
<input type="text" name="node_addr"> <B>NodeAddr</B>: Compute node addresses
(optional)
<P>
<input type="text" name="procs" value="1"> <B>Procs</B>: Count of processors 
on each compute node
<P>
<input type="text" name="partition_name" value="debug"> <B>PartitionName</B>: 
Name of the one partition to be created
<P>
<input type="text" name="max_time" value="-1"> <B>MaxTime</B>: 
Maximum time limit of jobs in minutes, -1 indicates no limit
<P>

<H2>SLURM User</H2>
The SLURM controller (slurmctld) can run without elevated privileges, 
so it is recommended that a user "slurm" be created for it. For testing 
purposes any user name can be used.
<P>
<input type="text" name="slurm_user" value="slurm"> <B>SlurmUser</B>
<P>

<H2>SLURM Port Numbers</H2>
The SLURM controller (slurmctld) requires a unique port for communcations 
as do the SLURM compute node deamonds (slurmd). If not set, slurm ports 
are set by checking for an entry in <I>/etc/services</I> and if that 
fails by using an interal default set at SLURM build time. 
<P>
<input type="text" name="slurmctld_port" value="7010"> <B>SlurmctldPort</B>
<P>
<input type="text" name="slurmd_port" value="7011"> <B>SlurmdPort</B>
<P>

<H2>Authentication</H2>
Define the method used for authenticating communicating between SLURM components.<BR>
Select one value for <B>AuthType</B>:<BR>
<input type="radio" name="auth_type" value="none"> <B>None</B>: No authentication, 
not recommended production use<br>
<input type="radio" name="auth_type" value="authd"> <B>Authd</B>: Brent Chun's authd<BR>
<input type="radio" name="auth_type" value="munge" checked> <B>Munge</B>: LLNL's Munge<BR>
<P>
Define the location of public and private SSL keys used by SLURM. 
These need to be generated by the SLURM administrator.
Specify fully qualified pathnames. Both values are required.i
<P>
<input type="text" name="private_key"> <B>JobCredentialPrivateKey</B>
<P>
<input type="text" name="public_key"> <B>JobCredentialPublicCertificate</B>
<P>

<H2>State Preservation</H2>
Define the location of a directory where the slurmctld daemon saves its state. 
This should be a fully qualified pathname which can be read and written to 
by the SLURM user on both the control machine and backup controller (if configured).
The location of a directory where slurmd saves state should also be defined.
This must be a unique directory on each compute server (local disk).
<P>
<input type="text" name="state_save_location" value="/tmp"> <B>StateSaveLocation</B>:
Slurmctld state save directory
<P>
<input type="text" name="slurmd_spool_dir" value="/tmp/slurmd"> <B>SlurmdSpoolDir</B>:
Slurmd state save directory
<P>
 
<H2>Scheduling</H2>
Define the mechanism to be used for controlling job ordering.<BR>
Select one value for <B>SchedulerType</B>:<BR>
<input type="radio" name="sched_type" value="builtin">  <B>Builtin</B>: First-In 
First-Out (FIFO)<BR>
<input type="radio" name="sched_type" value="backfill" checked> <B>Backfill</B>: 
FIFO with backfill<BR>
<input type="radio" name="sched_type" value="wiki"> <B>Wiki</B>: Wiki interface to Maui 
(configuration parameters SchedulerAuth and SchedulerPort must specified)<BR>
<P>
<input type="text" name="scheduler_auth" value=""> <B>SchedulerAuth</B>: authentication 
token (used by Wiki only)
<P>
<input type="text" name="scheduler_port" value=""> <B>SchedulerPort</B>: scheduler 
communcations port (used by Wiki only)
<P>

<H2>Interconnect</H2>
Define the node interconnect used.<BR>
Select one value for <B>SwitchType</B>:<BR>
<input type="radio" name="switch_type" value="elan"> <B>Elan</B>: Quadrics Elan3 or Elan4<BR>
<input type="radio" name="switch_type" value="federation"> <B>Federation</B>: IBM 
Federation Switch<BR>
<input type="radio" name="switch_type" value="none" checked> <B>None</B>: No special 
handling required (InfiniBand, Myrinet, Ethernet, etc.)<BR>
<P>

<H2>Default MPI Type</H2>
Specify the type of MPI to be used by default. SLURM will configure environment 
variables accordingly. Users can over-ride this specification with an srun option.<BR>
Select one value for <B>MpiDefault</B>:<BR>
<input type="radio" name="mpi_default" value="lam"> <B>Lam</B>: Lam MPI and Open MPI<BR>
<input type="radio" name="mpi_default" value="mpichgm"> <B>Mpich-Gm</B><BR>
<input type="radio" name="mpi_default" value="mvapich"> <B>MVAPICH</B><BR>
<input type="radio" name="mpi_default" value="none" checked> <B>None</B>: This works 
for most other MPI types<BR>
<P>

<H2>Process Tracking</H2>
Define the algorithm used to identify which processes are associated with a
given job. This is used signal, kill, and account for the processes associated 
with a job step.<BR>
Select one value for <B>ProctrackType</B>:<BR>
<input type="radio" name="proctrack_type" value="aix"> <B>AIX</B>: Use AIX kernel 
extension, recommended for AIX systems<BR>
<input type="radio" name="proctrack_type" value="pgid" checked> <B>Pgid</B>: Use Unix
Process Group ID, processes changing their process group ID can escape from SLURM 
control<BR>
<input type="radio" name="proctrack_type" value="linuxproc"> <B>LinuxProc</B>: Use
parent process ID records, required for MPICH-GM use, processes can escape 
from SLURM control<BR>
<input type="radio" name="proctrack_type" value="rms"> <B>RMS</B>: Use Quadrics
kernel infrastructure, recommended for systems where this is available<BR>
<P>

<H2>Resource Selection</H2>
Define resource (node) selection algorithm to be used.<BR>
Select one value for <B>SelectType</B>:<BR>
<input type="radio" name="select_type" value="cons_res"> <B>Cons_res</B>: Allocate 
individual processors and memory<BR>
<input type="radio" name="select_type" value="linear" checked> <B>Linear</B>: Node-base 
resource allocation, does not manage indivual processor allocation<BR>
<input type="radio" name="select_type" value="bluegene"> <B>BlueGene</B>: For IBM
Blue Gene systems only<BR>
<P>

<H2>Event Logging</H2>
Slurmctld and slurmd daemons can each be configured with different 
levels of logging verbosity from 0 (quiet) to 7 (extremely verbose).
Each may also be configured to use debug files. Use fully qualified 
pathnames for the files.
<P>
<input type="text" name="slurmctld_debug" value="3"> <B>SlurmctldDebug</B> (0 to 7)
<P>
<input type="text" name="slurmctld_logfile" value=""> <B>SlurmctldLogFile</B> (default is none, log goes to syslog)
<P>
<input type="text" name="slurmd_debug" value="3"> <B>SlurmdDebug</B> (0 to 7)
<P>
<input type="text" name="slurmd_logfile" value=""> <B>SlurmdLogFile</B> (default is none, log goes to syslog)
<P>

<H2>Job Completion Logging</H2>
Define the job completion logging mechanism to be used.<BR> 
Select one value for <B>JobCompType</B>:<BR>
<input type="radio" name="job_comp_type" value="none" checked> <B>None</B>: No job 
completion logging<BR>
<input type="radio" name="job_comp_type" value="filetxt"> <B>FileTxt</B>: Write job 
completion status to a text file<BR>
<input type="radio" name="job_comp_type" value="script"> <B>Script</B>: Use an 
arbitrary script to log job completion<BR>
<P>
<input type="text" name="job_comp_loc" value=""> <B>JobCompLoc</B>: Location specification. 
This is the location of the text file to be written to or the script to be run (depends
upon logging mode). Use a fully qualified pathname.
<P>

<H2>Job Accounting</H2>
SLURM can account for resource use on Linux systems only.<BR>
Select one value for <B>JobAcctType</B>:<BR>
<input type="radio" name="job_acct_type" value="none" checked> <B>None</B>: No job
accounting<BR>
<input type="radio" name="job_acct_type" value="log"> <B>Log</B>: Write job
accounting information to a file, use with Linux systems only<BR>
<input type="text" name="job_acct_loc" value=""> <B>JobAcctLoc</B>: Location specification.
This is the location of the text file to be written to (used by Log only).Use a fully 
qualified pathname.
<P>

<H2>Process ID Logging</H2>
Define the location into which we can record the daemon's process ID.
This is used for locate the appropriate daemon for signalling.
Specify a specify the fully qualified pathname for the file.
<P>
<input type="text" name="slurmctld_pid_file" value="/var/run/slurmctld.pid"> 
<B>SlurmctldPidFile</B>
<P>
<input type="text" name="slurmd_pid_file" value="/var/run/slurmd.pid"> 
<B>SlurmdPidFile</B>
<P>

<H2>Timers</H2>
SLURM has a variety of timers to control when to consider a node DOWN, 
when to purge job records, how long to give a job to gracefully terminate, etc.
<P>
<input type="text" name="slurmctld_timeout" value="300">
<B>SlurmctldTimeout</B>: How many seconds the backup controller waits before 
becoming the master controller
<P>
<input type="text" name="slurmd_timeout" value="300">
<B>SlurmdTimeout</B>: How many seconds the SLURM controller waits for the slurmd 
to respond to a request before considering the node DOWN
<P>
<input type="text" name="heartbeat_interval" value="60">
<B>HeartbeatInterval</B>: How many seconds between SLURM controller attempts to 
contace the slurmd daemons 
<P>
<input type="text" name="inactive_limit" value="0">
<B>InactiveLimit</B>: How many seconds the SLURM controller waits for srun 
commands to respond before considering the job or job step inactive and 
terminating it. A value of zero indicates unlimited wait
<P>
<input type="text" name="min_job_age" value="300">
<B>MinJobAge</B>: How many seconds the SLURM controller waits after a
job terminates before purging its record. A record of the job will 
persist in job completion and/or accounting records indefinitely, 
but will no longer be visible with the squeue command after puring 
<P>
<input type="text" name="kill_wait" value="30">
<B>KillWait</B>: How many seconds a job is given to gracefully terminate 
after reaching its time limit and being sent SIGTERM before sending 
a SIGKILLL
<P>
<input type="text" name="wait_time" value="0">
<B>WaitTime</B>: How many seconds after a job step's first task terminates 
before terminating all remaining tasks. A value of zero indicates unlimited wait
<P> 

<BR> 
<BR>
<input type=submit value="Submit" onClick="javascript:displayfile()">
<input type=reset value="Reset Form">
<P>
</FORM>
<HR>
<p class="footer">UCRL-WEB-217616<br>
Last modified 2 November 2005</p>
</BODY>

