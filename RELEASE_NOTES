RELEASE NOTES FOR SLURM VERSION 2.2
05 January 2010 (through SLURM 2.1.0)


IMPORTANT NOTE:
SLURM state files in version 2.2 are different from those of version 2.1.
After installing SLURM version 2.2, plan to restart without preserving
jobs or other state information. While SLURM version 2.1 is still running,
cancel all pending and running jobs (e.g.
"scancel --state=pending; scancel --state=running"). Then stop and restart
daemons with the "-c" option or use "/etc/init.d/slurm startclean".

If using the slurmdbd (SLURM DataBase Daemon) you must update this first.
The 2.2 slurmdbd will work with SLURM daemons at version 1.3.0 and above.
You will not need to update all clusters at the same time, but it is very
important to update slurmdbd first and having it running before updating
any other clusters making use of it.  No real harm will come from updating
your systems before the slurmdbd, but they will not talk to each other
until you do.

There are substantial changes in the slurm.conf configuration file. It
is recommended that you rebuild your configuration file using the tool
doc/html/configurator.html that comes with the distribution.


HIGHLIGHTS
* Slurmctld restart/reconfiguration operations have been altered. 
  NOTE: There will be no change in behavior unless partition configuration 
  or node Features/Weight are altered using the scontrol command to differ 
  from the contents of the slurm.conf configuration file.

  Preserve current partition state information plus node Feature and Weight 
  state information after slurmctld receives a SIGHUP signal or is restarted 
  with the -R option. Recreate partition plus node information (except node
  State and Reason) from slurm.conf file after executing "scontrol reconfig" 
  or restarting slurmctld *without* the -R option. 

     OPERATION            ACTION
     slurmctld -R         Recover all job, node and partition state
     slurmctld            Recover job state, recreate node and partition state
     slurmctld -c         Recover no jobs, recreate node and partition state
     SIGHUP to slurmctld  Preserve all job, node and partition state
     scontrol reconfig    Preserve job state, recreate node and partition state

  Old logic preserved node Feature plus partition state after "slurmctld" or 
  "scontrol reconfig" rather than recreating it from slurm.conf. Node Weight 
  was formerly always recreated from slurm.conf. 

CONFIGURATION FILE CHANGES (see "man slurm.conf" for details)
* Added VSizeFactor to enforce virtual memory limits for jobs and job steps as
  a percentage of their real memory allocation.

COMMAND CHANGES (see man pages for details)


BLUEGENE SPECIFIC CHANGES

API CHANGES
* Changed members of the following structs:
job_info_t
	num_procs -> num_cpus
	job_min_cpus -> pn_min_cpus
	job_min_memory -> pn_min_memory
	job_min_tmp_disk -> pn_min_tmp_disk

job_desc_msg_t
	num_procs -> min_cpus
	job_min_cpus -> pn_min_cpus
	job_min_memory -> pn_min_memory
	job_min_tmp_disk -> pn_min_tmp_disk

* Added the following struct definitions:
job_desc_msg_t
	max_cpus

node_info_t
	reason_time
	reason_uid

update_node_msg_t
	reason_uid

* Changed the following enums

* Added the following API's

* Changed the following API's


OTHER CHANGES
