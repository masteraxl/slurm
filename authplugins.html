<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 10">
<meta name=Originator content="Microsoft Word 10">
<link rel=File-List href="authplugins_files/filelist.xml">
<title>/home/jwindley/slurm/docs/authplugins.html</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Jay Windley</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>Jay Windley</o:LastAuthor>
  <o:Revision>10</o:Revision>
  <o:TotalTime>178</o:TotalTime>
  <o:Created>2003-03-21T18:13:00Z</o:Created>
  <o:LastSaved>2003-03-21T21:13:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>1724</o:Words>
  <o:Characters>9828</o:Characters>
  <o:Company> </o:Company>
  <o:Lines>81</o:Lines>
  <o:Paragraphs>23</o:Paragraphs>
  <o:CharactersWithSpaces>11529</o:CharactersWithSpaces>
  <o:Version>10.3501</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]-->
<style>
<!--
@media print

{

	body

	{

		padding-top: 1in; padding-bottom: 1in;

		padding-left: 1in; padding-right: 1in;

	}

}
body
	{widows: 2;
	font-stretch: normal;}
p
	{widows: 2;
	font-stretch: normal;}
.NORMAL
	{widows: 2;
	font-stretch: normal;}

 /* Font Definitions */
 @font-face
	{font-family:Courier;
	panose-1:2 7 4 9 2 2 5 2 4 4;
	mso-font-alt:"Courier New";
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:"Nimbus Roman";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-alt:"Times New Roman";
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:0 0 0 0 0 0;}
@font-face
	{font-family:"Nimbus Sans";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-alt:"Times New Roman";
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:auto;
	mso-font-signature:0 0 0 0 0 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	color:windowtext;}
h1
	{margin-top:21.95pt;
	margin-right:0in;
	margin-bottom:2.95pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	font-size:17.0pt;
	font-family:"Nimbus Sans";
	color:windowtext;
	font-weight:bold;}
h2
	{margin-top:21.95pt;
	margin-right:0in;
	margin-bottom:2.95pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:2;
	font-size:14.0pt;
	font-family:"Nimbus Sans";
	color:windowtext;
	font-weight:bold;}
p
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:11.95pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Nimbus Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	color:black;}
p.blocktext, li.blocktext, div.blocktext
	{mso-style-name:blocktext;
	margin-top:0in;
	margin-right:1.0in;
	margin-bottom:5.85pt;
	margin-left:1.0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Nimbus Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	color:black;}
p.heading1, li.heading1, div.heading1
	{mso-style-name:heading1;
	margin-top:21.95pt;
	margin-right:0in;
	margin-bottom:2.95pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:17.0pt;
	font-family:"Nimbus Sans";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	color:black;
	font-weight:bold;}
p.heading2, li.heading2, div.heading2
	{mso-style-name:heading2;
	margin-top:21.95pt;
	margin-right:0in;
	margin-bottom:2.95pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:14.0pt;
	font-family:"Nimbus Sans";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	color:black;
	font-weight:bold;}
p.normal, li.normal, div.normal
	{mso-style-name:normal;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:11.95pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Nimbus Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	color:black;}
span.SpellE
	{mso-style-name:"";
	mso-spl-e:yes;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:273175015;
	mso-list-template-ids:-1614802786;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";}
</style>
<![endif]--><!-- ================================================================================  --><!-- This HTML file was created by AbiWord.                                            --><!-- AbiWord is a free, Open Source word processor.                                    --><!-- You may obtain more information about AbiWord at www.abisource.com                --><!-- ================================================================================  --><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body bgcolor=white lang=EN-US style='tab-interval:.5in'>

<div class=Section1>

<div>

<h1 style='margin-bottom:12.0pt'><span style='color:black'>SLURM Authentication
<span class=SpellE>Plugin</span> API<o:p></o:p></span></h1>

<h2 style='margin-bottom:12.0pt'><span style='color:black'>Overview<o:p></o:p></span></h2>

<p style='margin-bottom:12.0pt'>This document describes SLURM authentication <span
class=SpellE>plugins</span> and the API which defines them.&nbsp; It is
intended as a resource to programmers wishing to write their own SLURM
authentication <span class=SpellE>plugins</span>.&nbsp; This is version 0 of
the API.</p>

<p style='margin-bottom:12.0pt'>SLURM authentication <span class=SpellE>plugins</span>
are SLURM <span class=SpellE>plugins</span> which implement the SLURM
authentication API described herein.&nbsp; They must conform to the SLURM <span
class=SpellE>Plugin</span> API with the following specifications:</p>

<p style='margin-bottom:12.0pt'><span class=GramE><span style='font-family:
Courier'>const</span></span><span style='font-family:Courier'> char <span
class=SpellE>plugin_type</span>[]</span>- The major type must be
&quot;auth&quot;.&nbsp; The minor type can be any recognizable abbreviation for
the type of authentication.&nbsp; We recommend, for example:</p>

<p class=MsoNormal style='mso-margin-top-alt:auto;margin-left:0in;text-indent:
-.25in;mso-list:l0 level1 lfo1;tab-stops:list .5in'><![if !supportLists]><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol;color:black'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"Nimbus Roman";
color:black'>&quot;<span class=GramE>none</span>&quot; - A <span class=SpellE>plugin</span>
which implements the API without providing any actual authentication service.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;margin-left:0in;text-indent:
-.25in;mso-list:l0 level1 lfo1;tab-stops:list .5in'><![if !supportLists]><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol;color:black'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"Nimbus Roman";
color:black'>&quot;<span class=SpellE><span class=GramE>authd</span></span>&quot;
- Brett Chun's Linux <span class=SpellE>authd</span>.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;margin-left:0in;text-indent:
-.25in;mso-list:l0 level1 lfo1;tab-stops:list .5in'><![if !supportLists]><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol;color:black'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"Nimbus Roman";
color:black'>&quot;<span class=SpellE><span class=GramE>munged</span></span>&quot;
- <span class=SpellE>LLNL's</span> <span class=SpellE>munge</span> protocol.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;margin-bottom:12.0pt;
margin-left:0in;text-indent:-.25in;mso-list:l0 level1 lfo1;tab-stops:list .5in'><![if !supportLists]><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol;color:black'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"Nimbus Roman";
color:black'>&quot;krb5&quot; - Kerberos 5<o:p></o:p></span></p>

<p style='margin-bottom:12.0pt'>The <span class=SpellE><span style='font-family:
Courier'>plugin_name</span></span> and <span class=SpellE><span
style='font-family:Courier'>plugin_version</span></span> symbols required by
the SLURM <span class=SpellE>Plugin</span> API require no specialization for
authentication, except note carefully the versioning discussion below.</p>

<p style='margin-bottom:12.0pt'>The programmer is urged to study <span
class=SpellE><span style='font-family:Courier'>src/plugins/auth/auth_none.c</span></span>
for an example implementation of a SLURM authentication <span class=SpellE>plugin</span>.</p>

<h2 style='margin-bottom:12.0pt'><span style='color:black'>Data objects<o:p></o:p></span></h2>

<p style='margin-bottom:12.0pt'>The implementation must support an opaque
class, which it defines, to be used as an authentication <i>credential</i>.&nbsp;
This class must encapsulate all user-specific information necessary for the
operation of the API specification below.&nbsp; The <i>credential</i> is
referred to in SLURM code by an anonymous pointer (void *).</p>

<p class=MsoNormal style='margin-bottom:12.0pt'><span style='font-family:"Nimbus Roman";
color:black'>The implementation must maintain (though not necessarily directly
export) an enumerated <span class=SpellE><i>errno</i></span> to allow SLURM to
discover as practically as possible the reason for any failed API call.&nbsp;
The following enumerated integer values (declared in </span><span class=SpellE><span
style='font-family:Courier;color:black'>src/common/slurm_auth.h</span></span><span
style='font-family:"Nimbus Roman";color:black'>) must be used when appropriate.
<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;
margin-left:.5in'><span style='font-family:"Nimbus Roman";color:black'>SLURM_AUTH_BADARG
- an argument to an API function <span class=GramE>was &nbsp;invalid</span> or
malformed.<br>
SLURM_AUTH_MEMORY - a request could not be satisfied because memory for it
could not be allocated.<br>
SLURM_AUTH_NOUSER - a <i>credential</i> is improper because it refers to an
unknown user.<br>
SLURM_AUTH_INVALID - a <i>credential</i> is improper because the validation of
it has failed.&nbsp; This is specifically distinct from the expiration of a <i>credential</i>.<br>
SLURM_AUTH_MISMATCH - a <i>credential</i> could not be properly unpacked
because it is of an incompatible type or version.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-bottom:12.0pt'><span style='font-family:"Nimbus Roman";
color:black'>These values must not be used as return values in integer-valued
functions in the API.&nbsp; The proper error return value from integer-valued
functions is SLURM_ERROR.&nbsp; While it is most practical to associate a
different <span class=SpellE><i>errno</i></span> with each instance of a <i>credential</i>,
this is not necessarily enforced by the API.&nbsp; The implementation should
endeavor to provide useful and pertinent information by whatever means is
practical.&nbsp; In most cases this means an <span class=SpellE>errno</span>
for each <i>credential</i>, since <span class=SpellE>plugins</span> must be
re-entrant.&nbsp; If a <span class=SpellE>plugin</span> maintains a global <span
class=SpellE><i>errno</i></span> in place of or in addition to a per-<i>credential</i>
<span class=SpellE><i>errno</i></span>, it is not required to enforce mutual
exclusion on it.&nbsp; Successful API calls are not required to reset any <span
class=SpellE><i>errno</i></span> to a known value.&nbsp; However, the initial
value of any <span class=SpellE><i>errno</i></span>, prior to any error
condition arising, should be SLURM_SUCCESS. <br>
<br>
<span class=SpellE>Plugins</span> may assign implementation-specific values to <span
class=SpellE><i>errno</i></span> so long as they do not conflict with the
values assigned above.&nbsp; This is done programmatically by assigning <span
class=SpellE>plugin</span>-specific <span class=SpellE><i>errno</i></span>
values which are arithmetically greater than or equal to the symbol
SLURM_AUTH_FIRST_LOCAL_ERROR. <o:p></o:p></span></p>

<h2 style='margin-bottom:12.0pt'><span style='color:black'>API functions<o:p></o:p></span></h2>

<p style='margin-bottom:12.0pt'><span style='font-family:"Nimbus Sans"'>The
following functions must appear.<span style='mso-spacerun:yes'> 
</span>Functions which are not implemented should be stubbed.<o:p></o:p></span></p>

<p style='margin-bottom:12.0pt'><span class=GramE><span style='font-family:
Courier'>void</span></span><span style='font-family:Courier'> *<span
class=SpellE>slurm_auth_alloc</span> (void);</span></p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><b>Description<br>
</b><span class=GramE>Allocates</span> from the free store an anonymous <i>credential</i>
object and returns a pointer to it.&nbsp; The pointer should be valid until
passed to <span class=SpellE><span style='font-family:Courier'>slurm_auth_<span
class=GramE>free</span></span></span><span class=GramE><span style='font-family:
Courier'>(</span></span><span style='font-family:Courier'>)</span> for
disposal.&nbsp; The credential is not expected to be in a usable state until it
is activated by <span class=SpellE><span style='font-family:Courier'>slurm_auth_<span
class=GramE>activate</span></span></span><span class=GramE><span
style='font-family:Courier'>(</span></span><span style='font-family:Courier'>)</span>.&nbsp;
SLURM will not pass <i>credentials</i> to the API which <span class=GramE>have</span>
not been allocated by this function.</p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><span class=GramE><b>Arguments<br>
</b>None.</span></p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><b>Returns<br>
</b><span class=GramE>A</span> pointer to a newly allocated credential if
successful.&nbsp; On failure the <span class=SpellE>plugin</span> should return
NULL and set its <span class=SpellE><i>errno</i></span> to an appropriate value
to indicate the reason for failure.</p>

<p class=MsoNormal style='margin-bottom:12.0pt'><span class=SpellE><span
class=GramE><span style='font-family:Courier;color:black'>int</span></span></span><span
style='font-family:Courier;color:black'> <span class=SpellE>slurm_auth_free</span>
(void *<span class=SpellE>cr</span>);</span><span style='font-family:"Nimbus Roman";
color:black'><o:p></o:p></span></p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><b>Description<br>
</b><span class=SpellE>Deallocates</span> a <i>credential</i> that was
allocated with <span class=SpellE><span style='font-family:Courier'>slurm_auth_<span
class=GramE>alloc</span></span></span><span class=GramE><span style='font-family:
Courier'>(</span></span><span style='font-family:Courier'>)</span> and any
associated storage that has been allocated for it during its use.</p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><span class=GramE><b>Arguments<br>
</b><span class=SpellE><span style='font-family:Courier'>cr</span></span> -
(input) pointer to the <i>credential</i> which is to be <span class=SpellE>deallocated</span>.</span>&nbsp;
<span class=GramE>Cannot be NULL.</span></p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><span class=GramE><b>Returns<br>
</b>SLURM_SUCCESS if successful.</span><span style='mso-spacerun:yes'> 
</span>On failure the <span class=SpellE>plugin</span> should return
SLURM_ERROR and set the <span class=SpellE><i style='mso-bidi-font-style:normal'>errno</i></span>
to an appropriate value to indicate the reason for failure.</p>

<p class=MsoNormal style='margin-bottom:12.0pt'><span class=SpellE><span
class=GramE><span style='font-family:Courier;color:black'>int</span></span></span><span
style='font-family:Courier;color:black'> <span class=SpellE>slurm_auth_activate</span>
(void *<span class=SpellE>cr</span>);</span><span style='font-family:"Nimbus Roman";
color:black'><o:p></o:p></span></p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><b>Description<br>
</b><span class=GramE>Prepares</span> a <i>credential</i> for verification,
usually by some &quot;signing&quot; process.&nbsp; <span class=SpellE><span
style='font-family:Courier'>slurm_auth_<span class=GramE>activate</span></span></span><span
class=GramE><span style='font-family:Courier'>(</span></span><span
style='font-family:Courier'>) </span>and <span class=SpellE><span
style='font-family:Courier'>slurm_auth_verify</span></span><span
style='font-family:Courier'>()</span> are strictly sequential operations.&nbsp;
A <i>credential</i> which has been successfully activated should be
successfully verified without any further processing, provided it has not
expired.&nbsp; A <i>credential</i> must be activated before it can be
successfully verified.&nbsp; The return values of <span class=SpellE><span
style='font-family:Courier'>slurm_auth_get_<span class=GramE>uid</span></span></span><span
class=GramE><span style='font-family:Courier'>(</span></span><span
style='font-family:Courier'>)</span> and <span class=SpellE><span
style='font-family:Courier'>slurm_auth_get_gid</span></span><span
style='font-family:Courier'>()</span> may be meaningful after activation
(depending on <span class=SpellE>plugin</span> preference), but are not
considered trustworthy by SLURM until verification.</p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><span class=GramE><b>Arguments<br>
</b><span class=SpellE><span style='font-family:Courier'>cr</span></span> -
(input) pointer to the <i>credential</i> which is to be activated.</span>&nbsp;
<span class=GramE>Cannot be NULL.</span></p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><span class=GramE><b>Returns<br>
</b>SLURM_SUCCESS if successful.</span>&nbsp; On failure the function should
return SLURM_ERROR and set its <span class=SpellE><i>errno</i></span> to an
appropriate value to indicate the reason for failure.</p>

<p style='margin-bottom:12.0pt'><span class=SpellE><span class=GramE><span
style='font-family:Courier'>int</span></span></span><span style='font-family:
Courier'> <span class=SpellE>slurm_auth_verify</span> (void *<span
class=SpellE>cr</span> );</span></p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><b>Description</b><br>
<span class=GramE>Verifies</span> that a <i>credential</i> is in order and
correctly identifies the associated user.&nbsp; It also verifies that the <i>credential</i>
has not expired.&nbsp; If verification is successful, the return values of <span
class=SpellE><span style='font-family:Courier'>slurm_auth_get_<span
class=GramE>uid</span></span></span><span class=GramE><span style='font-family:
Courier'>(</span></span><span style='font-family:Courier'>)</span> and <span
class=SpellE><span style='font-family:Courier'>slurm_auth_get_gid</span></span><span
style='font-family:Courier'>()</span> in subsequent calls must correspond to
the actual verified system UID and GID of the user associated with the <i>credential</i>.&nbsp;
Verification must fail if the <i>credential</i> has not previously been
activated, even if a <i>credential</i> implementation cannot exist in an <span
class=SpellE>unactivated</span> state.&nbsp; A <i>credential</i>'s valid term
is defined at activation and verification must fail if the <i>credential</i>
has expired, even if it would otherwise be valid.</p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><span class=GramE><b>Arguments<br>
</b><span class=SpellE><span style='font-family:Courier'>cr</span></span> -
(input) pointer to the <i>credential</i> which is to be verified.</span>&nbsp; <span
class=GramE>Cannot be NULL.</span></p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><b>Returns<br>
</b>SLURM_SUCCESS if the <i>credential</i> is verified to be in order and has
not expired.&nbsp; If the <i>credential</i> cannot be verified, or if the <i>credential</i>
has expired, the function should return SLURM_ERROR and set its <span
class=SpellE><i>errno</i></span> to an appropriate value to indicate the reason
for failure.</p>

<p class=MsoNormal style='margin-bottom:12.0pt'><span class=SpellE><span
style='font-family:Courier;color:black'>uid_t</span></span><span
style='font-family:Courier;color:black'> <span class=SpellE>slurm_auth_get_uid</span>
(void *<span class=SpellE>cr</span>)<span class=GramE>;</span></span><span
style='font-family:"Nimbus Roman";color:black'><br>
</span><span class=SpellE><span style='font-family:Courier;color:black'>gid_t</span></span><span
style='font-family:Courier;color:black'> <span class=SpellE>slurm_auth_get_gid</span>
(void *<span class=SpellE>cr</span>);</span><span style='font-family:"Nimbus Roman";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;
margin-left:.5in'><b><span style='font-family:"Nimbus Roman";color:black'>Description</span></b><span
style='font-family:"Nimbus Roman";color:black'><br>
<span class=GramE>Extracts</span> the numerical UID (GID) of the user
corresponding to the given <i>credential</i>.&nbsp; SLURM considers this value
trustworthy only if the credential has been successfully verified using</span><span
style='font-family:Courier;color:black'> <span class=SpellE>slurm_auth_<span
class=GramE>verify</span></span><span class=GramE>(</span>)</span><span
style='font-family:"Nimbus Roman";color:black'>.&nbsp; An unverified <i>credential</i>
does not immediately give rise to an error condition in these functions, since
this would require a <span class=SpellE>plugin</span> to distinguish between a
verified and an unverified <i>credential</i>, which may be computationally
expensive.&nbsp; A <span class=SpellE>plugin</span> may consider the lack of
verification as an error.<o:p></o:p></span></p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><span class=GramE><b>Arguments<br>
</b><span class=SpellE><span style='font-family:Courier'>cr</span></span> -
(input) pointer to the <i>credential</i> containing the desired identification.</span>&nbsp;
<span class=GramE>Cannot be NULL.</span></p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><b>Returns<br>
</b><span class=GramE>If</span> successful, the Linux UID (GID) associated with
the <i>credential</i>.&nbsp; In case of error, SLURM_AUTH_NOBODY should be
returned and <span class=SpellE><i>errno</i></span> set appropriately to
indicate the cause of the failure.</p>

<p style='margin-bottom:12.0pt'><span class=SpellE><span class=GramE><span
style='font-family:Courier'>int</span></span></span><span style='font-family:
Courier'> <span class=SpellE>slurm_auth_pack</span> (void *<span class=SpellE>cr</span>,
<span class=SpellE>Buf</span> <span class=SpellE>buf</span>);</span></p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><b>Description<br>
</b>Marshals a <i>credential</i> into a buffer for transmission according to
the SLURM packing protocol.&nbsp; All authentication <span class=SpellE>plugins</span>
must first pack the <span class=SpellE><span style='font-family:Courier'>plugin_type</span></span>
and then the <span class=SpellE><span style='font-family:Courier'>plugin_version</span></span>
data before any <span class=SpellE>plugin</span>-specific data elements are
packed.&nbsp; <span class=SpellE><span style='font-family:Courier'>slurm_auth_<span
class=GramE>pack</span></span></span><span class=GramE><span style='font-family:
Courier'>(</span></span><span style='font-family:Courier'>)</span> and <span
class=SpellE><span style='font-family:Courier'>slurm_auth_pack</span></span><span
style='font-family:Courier'>()</span> are strictly reciprocal.&nbsp; The result
of a packing followed by an unpacking must be a functionally equivalent <i>credential</i>.&nbsp;
A <i>credential</i> is deemed appropriate for marshalling at any time after its
allocation and before its destruction.</p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><span class=GramE><b>Arguments<br>
</b><span class=SpellE><span style='font-family:Courier'>cr</span></span> -
(input) pointer to the <i>credential</i> to pack.</span><br>
<span class=SpellE><span class=GramE><span style='font-family:Courier'>buf</span></span></span>
- (input/output) the buffer into which the <i>credential</i> should be packed.</p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><span class=GramE><b>Returns<br>
</b>SLURM_SUCCESS if successful.</span><span style='mso-spacerun:yes'> 
</span>On failure the <span class=SpellE>plugin</span> should return
SLURM_ERROR and set the <span class=SpellE><i style='mso-bidi-font-style:normal'>errno</i></span>
to indicate the reason for the failure.</p>

<p style='margin-bottom:12.0pt'><span class=SpellE><span class=GramE><span
style='font-family:Courier;mso-bidi-font-family:"Courier New"'>int</span></span></span><span
style='font-family:Courier;mso-bidi-font-family:"Courier New"'> <span
class=SpellE>slurm_auth_unpack</span> (void *<span class=SpellE>cr</span>, <span
class=SpellE>Buf</span> <span class=SpellE>buf</span>);<o:p></o:p></span></p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><b>Description<br>
</b><span class=SpellE>Unmarshals</span> a <i>credential</i> from a buffer
according to the SLURM packing protocol into a supplied (and presumed empty) <i>credential</i>
object.&nbsp; The <span class=SpellE>unmarshalled</span> credential is not
assumed to be activated or verified.&nbsp; The <span class=SpellE><span
style='font-family:Courier'>plugin_type</span></span> and <span class=SpellE><span
style='font-family:Courier'>plugin_version</span></span> data should first be
unpacked from the buffer and verified for applicability.&nbsp; The API does not
enforce that they must be equivalent, merely compatible.&nbsp; Compatibility is
implementation-dependent.</p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><span class=GramE><b>Arguments<br>
</b><span class=SpellE><span style='font-family:Courier'>cr</span></span> -
(output) pointer to the <i>credential</i> to pack.</span><br>
<span class=SpellE><span class=GramE><span style='font-family:Courier'>buf</span></span></span>
- (input/output) the buffer from which the <i>credential</i> should be
unpacked.</p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><span class=GramE><b>Returns<br>
</b>SLURM_SUCCESS if the <i>credential</i> was successfully unpacked.</span>&nbsp;
In case of failure, the function should return SLURM_ERROR and set <span
class=SpellE><i>errno</i></span> appropriately to indicate the cause of the
failure.&nbsp; If the function fails, no assumptions are made about the state
of the credential except its suitability for destruction via <span
class=SpellE><span style='font-family:Courier'>slurm_auth_<span class=GramE>free</span></span></span><span
class=GramE><span style='font-family:Courier'>(</span></span><span
style='font-family:Courier'>)</span>.</p>

<p style='margin-bottom:12.0pt'><span class=SpellE><span class=GramE><span
style='font-family:Courier'>int</span></span></span><span style='font-family:
Courier'> <span class=SpellE>slurm_auth_print</span> (void *<span class=SpellE>cr</span>,
FILE *<span class=SpellE>fp</span>);</span></p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><b>Description<br>
</b><span class=GramE>Writes</span> a human-readable representation of the
credential to a standard I/O stream.&nbsp; There are no strict API constraints
on the behavior of this <span class=GramE>function,</span> however it is
recommended that the information be as complete and as concise as
possible.&nbsp; For example, lengthy digital &quot;signatures&quot; need not be
printed bitwise, but may be represented by their checksum.&nbsp; The intent is
to provide a depiction of the <i>credential</i> for debugging purposes.</p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><span class=GramE><b>Arguments<br>
</b>None.</span></p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><span class=GramE><b>Returns<br>
</b>SLURM_SUCCESS if successful.</span><span style='mso-spacerun:yes'> 
</span>On failure the <span class=SpellE>plugin</span> should return
SLURM_ERROR and set the <span class=SpellE><i style='mso-bidi-font-style:normal'>errno</i></span>
appropriately to indicate the cause of failure.</p>

<p style='margin-bottom:12.0pt'><span class=SpellE><span class=GramE><span
style='font-family:Courier'>int</span></span></span><span style='font-family:
Courier'> <span class=SpellE>slurm_auth_errno</span> (void *<span class=SpellE>cr</span>);<o:p></o:p></span></p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><b>Description<br>
</b>Returns the current value of <span class=SpellE><i>errno</i></span>.&nbsp;
Whether the value is associated with the given <i>credential</i> or with the <span
class=SpellE>plugin</span> as a whole is implementation-dependent.&nbsp;
Because this function can be used to discover the reason why a credential
allocation has failed, the argument is advisory. <span style='font-family:Courier'><o:p></o:p></span></p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><b>Arguments<br>
</b><span class=SpellE><span style='font-family:Courier'>cr</span></span> -
(input) pointer to the <i>credential</i>, the status of whose most recently
executed API function is to be returned.&nbsp; This value may be NULL,
indicating that the most recent <span class=SpellE><i>errno</i></span> value
applicable to the <span class=SpellE>plugin</span> as a whole is to be
returned.</p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><b>Returns<br>
</b><span class=GramE>The</span> current value of <span class=SpellE><i>errno</i></span>
or SLURM_SUCCESS if there is no error to report.</p>

<p style='margin-bottom:12.0pt'><span class=GramE><span style='font-family:
Courier'>const</span></span><span style='font-family:Courier'> char *<span
class=SpellE>slurm_auth_errstr</span> (<span class=SpellE>int</span> <span
class=SpellE>errno</span>);<o:p></o:p></span></p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><b>Description<br>
</b>Provides a human-readable string associated with the given <span
class=SpellE><i>errno</i></span>.&nbsp; The <span class=SpellE>plugin</span>
need only supply error strings for the <span class=SpellE><i>errno</i></span>
values it defines and not for <span class=SpellE><i>errno</i></span> values
listed above that are required by the API.</p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><b>Arguments<br>
</b><span class=SpellE><span style='font-family:Courier'>errno</span></span> -
(input) the <span class=SpellE>plugin</span>-specific <span class=SpellE><i>errno</i></span>
for which a corresponding error message is desired.</p>

<p style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.5in'><b>Returns<br>
</b><span class=GramE>A</span> pointer to a static error message.&nbsp; This
function must always return a pointer to a string, even if the string is empty
or ambiguous such as &quot;unknown error&quot;.</p>

<h2 style='margin-bottom:12.0pt'><span style='color:black'>Versioning<o:p></o:p></span></h2>

<p style='margin-bottom:12.0pt'>This document describes version 0 of the SLURM
Authentication API.&nbsp; Future releases of SLURM may revise this API.&nbsp;
An authentication <span class=SpellE>plugin</span> conveys its ability to
implement a particular API version using the mechanism outlined for SLURM <span
class=SpellE>plugins</span>.&nbsp; In addition, the <i>credential</i> is
transmitted along with the version number of the <span class=SpellE>plugin</span>
that transmitted it.&nbsp; It is at the discretion of the <span class=SpellE>plugin</span>
author whether to maintain data format compatibility across different versions
of the <span class=SpellE>plugin</span>.</p>

</div>

<p class=MsoNormal style='margin-bottom:12.0pt'><span style='font-family:"Nimbus Roman";
color:black'><o:p>&nbsp;</o:p></span></p>

</div>
<hr>
<a href="http://www.llnl.gov/disclaimer.html">Privacy and Legal Notice</a>
<p>URL = http://www.llnl.gov/linux/slurm/authplugins.html
<p>UCRL-WEB-201790
<p>Last Modified January 6, 2004</p>
<address>Maintained by <a href="mailto:slurm-dev@lists.llnl.gov">
slurm-dev@lists.llnl.gov</a></address>
</body>

</html>
