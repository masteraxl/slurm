<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                        "http://www.w3.org/TR/REC-html40/loose.dtd">

<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="keywords" content="Simple Linux Utility for Resource Management, SLURM, resource management, 
Linux clusters, high-performance computing, Livermore Computing">
<meta name="LLNLRandR" content="UCRL-WEB-204324">
<meta name="LLNLRandRdate" content="12 October 2004">
<meta name="distribution" content="global">
<meta name="description" content="Simple Linux Utility for Resource Management">
<meta name="copyright"
content="This document is copyrighted U.S.
Department of Energy under Contract W-7405-Eng-48">
<meta name="Author" content="Morris Jette">
<meta name="email" content="jette1@llnl.gov">
<meta name="Classification"
content="DOE:DOE Web sites via organizational
structure:Laboratories and Other Field Facilities">
<title>Simple Linux Utility for Resource Management:Programmers Guide</title>
<link href="slurmstyles.css" rel="stylesheet" type="text/css">
</head>

<body bgcolor="#000000" text="#000000" leftmargin="0" topmargin="0">
<table width="770" border="0" cellspacing="0" cellpadding="0">
<tr> 
<td><img src="slurm_banner.jpg" width="770" height="145" usemap="#Map" border="0" alt="Simple Linux Utility for Resource Management"></td>
</tr>
</table>
<table width="770" border="0" cellspacing="0" cellpadding="3" bgcolor="#FFFFFF">
<tr> 
<td width="100%"> 
<table width="760" border="0" cellspacing="0" cellpadding="4" align="right">
<tr>
<td valign="top" bgcolor="#000000"><p><img src="spacer.gif" width="110" height="1" alt=""></p>
<p><a href="slurm.html" class="nav" align="center">Home</a></p>
<p><span class="whitetext">About</span><br>
<a href="overview.html" class="nav">Overview</a><br>
<a href="news.html" class="nav">What's New</a><br>
<a href="publications.html" class="nav">Publications</a><br>
<a href="team.html" class="nav">SLURM Team</a></p>
<p><span class="whitetext">Using</span><br>
<a href="documentation.html" class="nav">Documentation</a><br>
<a href="faq.html" class="nav">FAQ</a><br>
<a href="help.html" class="nav">Getting Help</a></p>
<p><span class="whitetext">Installing</span><br>
<a href="platforms.html" class="nav">Platforms</a><br>
<a href="download.html" class="nav">Download</a><br>
<a href="quickstart_admin.html" class="nav">Guide</a></p></td>
<td><img src="spacer.gif" width="10" height="1" alt=""></td>
<td valign="top"><h2><a name="top">SLURM Programmer's Guide</a></h2>

<h3>Overview</h3>

<p>Simple Linux Utility for Resource Management (SLURM) is an open source, fault-tolerant, 
and highly scalable cluster management and job scheduling system for large and 
small Linux clusters. Components include machine status, partition management, 
job management, scheduling, and stream copy modules. SLURM requires no kernel 
modifications for it operation and is relatively self-contained. 
<p>There is an overview of the components and their interactions available in 
a separate document, <a href="slurm_design.pdf"> SLURM: Simple Linux Utility for 
Resource Management</a> [PDF]. 

<p>SLURM is written in the C language and uses a GNU <b>autoconf</b> configuration 
engine. While initially written for Linux, other UNIX-like operating systems should 
be easy porting targets. Code should adhere to the <a href="coding_style.pdf"> 
Linux kernel coding style</a>. <i>(Some components of SLURM have been taken from 
various sources. Some of these components are written in C++ or do not conform 
to the Linux kernel coding style. However, new code written for SLURM should 
follow these standards.)</i>
 
<p>Many of these modules have been built and tested on a variety of Unix computers 
including Red Hat Linux, IBM's AIX, Sun's Solaris, and Compaq's Tru-64. The only 
module at this time that is operating system dependent is <span class="commandline">src/slurmd/read_proc.c</span>. 
We will be porting and testing on additional platforms in future releases. 

<h3>Plugins</h3>

<p>To make the use of different infrastructures possible, SLURM uses a general 
purpose plugin mechanism. A SLURM plugin is a dynamically linked code object that 
is loaded explicitly at run time by the SLURM libraries. It provides a customized 
implementation of a well-defined API connected to tasks such as authentication, 
interconnect fabric, task scheduling, etc. A set of functions is defined for use 
by all of the different infrastructures of a particular variety. When a SLURM 
daemon is initiated, it reads the configuration file to determine which of the 
available plugins should be used. A <a href="plugins.html">plugin developer's 
guide</a> is available with general information about plugins. Most plugin 
types also have their own documenation available, such as 
<a href="authplugins.html">SLURM Authentication Plugin API</a> and
<a href="jobcompplugins.html">SLURM Job Completion Logging API</a>.</p>

<p class="footer"><a href="#top">top</a></p>

<h3>Directory Structure</h3>

<p>The contents of the SLURM directory structure will be described below in increasing 
detail as the structure is descended. The top level directory contains the scripts 
and tools required to build the entire SLURM system. It also contains a variety 
of subdirectories for each type of file.</p>
<p>General build tools/files include: <b>acinclude.m4</b>, <b>autogen.sh</b>, 
<b>configure.ac</b>, <b>Makefile.am</b>, <b>Make-rpm.mk</b>, <b>META</b>, <b>README</b>, 
<b>slurm.spec.in</b>, and the contents of the <b>auxdir</b> directory. <span class="commandline">autoconf</span> 
and <span class="commandline">make</span> commands are used to build and install 
SLURM in an automated fashion. NOTE: <span class="commandline">autoconf</span> 
version 2.52 or higher is required to build SLURM. Execute 
<span class="commandline">autoconf -V</span> to check your version number. 
The build process is described in the README file. 

<p>Copyright and disclaimer information are in the files COPYING and DISCLAIMER. 
All of the top-level subdirectories are described below.</p>
<p style="margin-left:.2in"><b>auxdir</b>&#151;Used for building SLURM.<br>
<b>doc</b>&#151;Documentation including man pages. <br>
<b>etc</b>&#151;Sample configuration files.<br>
<b>slurm</b>&#151;Header files for API use. These files must be installed. Placing 
these header files in this location makes for better code portability.<br>
<b>src</b>&#151;Contains all source code and header files not in the "slurm" subdirectory 
described above.<br>
<b>testsuite</b>&#151;DejaGnu is used as a testing framework and all of its files 
are here.</p>

<p class="footer"><a href="#top">top</a></p>

<h3>Documentation</h3>
<p>All of the documentation is in the subdirectory <b>doc</b>. Man pages for the 
APIs, configuration file, commands, and daemons are in <b>doc/man</b>. Various 
documents suitable for public consumption are in <b>doc/html</b>. Overall SLURM 
design documents including various figures are in <b>doc/pubdesign</b>. Various 
design documents (many of which are dated) can be found in <b>doc/slides</b> and 
<b>doc/txt</b>. A survey of available resource managers as of 2001 is in <b>doc/survey</b>. 
<h3>Source Code</h3>

<p>Functions are divided into several categories, each in its own subdirectory. 
The details of each directory's contents are proved below. The directories are 
as follows: </p>

<p style="margin-left:.2in"><b>api</b>&#151;Application Program Interfaces into 
the SLURM code. Used to send and get SLURM information from the central manager. 
These are the functions user applications might utilize.<br>
<b>common</b>&#151;General purpose functions for widespread use throughout SLURM.<br>
<b>plugins</b>&#151;Plugin functions for various infrastructure. A separate subdirectory 
is used for each plugin class:<br> 
<span class="commandline">auth</span> for user authentication,<br> 
<span class="commandline">checkpoint</span> for system-initiated checkpoint 
and restart of user jobs,<br>
<span class="commandline">jobcomp</span> for job completion logging,<br> 
<span class="commandline">sched</span> for job scheduler,<br> 
<span class="commandline">select</span> for a job's node selection,<br>
<span class="commandline">switch</span> for switch (interconnect) specific functions, 
etc.<br>
<b>scancel</b>&#151;User command to cancel (or signal) a job or job step.<br>
<b>scontrol</b>&#151;Administrator tool to manage SLURM.<br>
<b>sinfo</b>&#151;User command to get information on SLURM nodes and partitions.<br>
<b>slurmctld</b>&#151;SLURM central manager daemon code.<br>
<b>slurmd</b>&#151;SLURM daemon code to manage the compute server nodes including 
the execution of user applications.<br>
<b>smap</b>&#151;User command to view layout of nodes, partitions, and jobs.
This is particularly valuable on systems like Blue Gene, which has a three
dimension torus topography.<br>
<b>squeue</b>&#151;User command to get information on SLURM jobs and job steps.<br>
<b>srun</b>&#151;User command to submit a job, get an allocation, and/or initiation 
a parallel job step.</p>

<p class="footer"><a href="#top">top</a></p>

<h3>Configuration</h3>
<p>Configuration files are included in the <b>etc</b> subdirectory. <b>slurm.conf.example</b> 
includes a description of all configuration options and default settings. See 
<b>doc/man/man5/slurm.conf.5</b> for more details.
<span class="commandline">init.d.slurm</span> 
is a script that determines which SLURM daemon(s) should execute on any node based 
upon the configuration file contents. It will also manage these daemons: starting, 
signalling, restarting, and stopping them.</p> 

<h3>Test Suite</h3>
<p>The <b>testsuite</b> files use a DejaGnu framework for testing. These tests 
are very limited in scope. We also have a set of Expect SLURM tests available 
as a separate distribution. These tests are executed after SLURM has been installed 
and the daemons initiated. About 110 test scripts exercise all SLURM commands 
and options including stress tests. Get these test from
<a href="ftp://ftp.llnl.gov/pub/linux/slurm-qa">ftp://ftp.llnl.gov/pub/linux/slurm-qa</a></p>

<h3>Tricks of the Trade</h3>
<p>You can make a single node appear to SLURM as a Linux cluster by manually 
defining <b>HAVE_FRONT_END</b> to have a non-zero value in the file <b>config.h</b>.
All (fake) nodes should be defined in the <b>slurm.conf</b> file.
These nodes should be configured with a single <b>NodeAddr</b> value
indicating the node on which single <span class="commandline">slurmd</span> daemon 
executes.  Initiate one <span class="commandline">slurmd</span> and one 
<span class="commandline">slurmctld</span> daemon. Do not initiate too many 
simultaneous job steps to avoid overloading the 
<span class="commandline">slurmd</span> daemon executing them all.</p>

<p class="footer"><a href="#top">top</a></p></td>

</tr>
<tr> 
<td colspan="3"><hr> <p>For information about this page, contact <a href="mailto:slurm-dev@lists.llnl.gov">slurm-dev@lists.llnl.gov</a>.</p>
<p><a href="http://www.llnl.gov/"><img align=middle src="lll.gif" width="32" height="32" border="0"></a></p>
<p class="footer">UCRL-WEB-204324<br>
Last modified 12 October 2004</p></td>
</tr>
</table>
</td>
 </tr>
</table>
<map name="Map">
<area shape="rect" coords="616,4,762,97" href="../">
<area shape="rect" coords="330,1,468,11" href="http://www.llnl.gov/disclaimer.html">
<area shape="rect" coords="11,23,213,115" href="slurm.html">
</map>
</body>
</html>
